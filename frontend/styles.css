/* styles.css */

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

:root {
    color-scheme: light;
    font-size: 16px;
    --nav-h: 60px;
    --footer-h: 48px;
}

body.theme-light {
    --body-gradient: linear-gradient(135deg, #f2f6f9 0%, #e7eef4 45%, #f3f7fb 100%);
    --surface: rgba(255, 255, 255, 0.95);
    --surface-alt: rgba(255, 255, 255, 0.82);
    --border: rgba(15, 51, 72, 0.12);
    --shadow: 0 20px 32px -24px rgba(1, 3, 4, 0.45);
    --primary: #0f3247;
    --primary-hover: #0b2636;
    --primary-text: #f8fafc;
    --text-primary: #0b2636;
    --text-muted: rgba(13, 43, 61, 0.7);
    --assistant-bg: rgba(15, 51, 72, 0.08);
    --assistant-border: rgba(15, 51, 72, 0.16);
    --assistant-text: #0d2b3d;
    --user-bg: #0d6ea7;
    --user-border: rgba(15, 50, 71, 0.28);
    --user-text: #f3f7fa;
    --system-bg: rgba(253, 186, 58, 0.18);
    --system-border: rgba(253, 186, 58, 0.32);
    --system-text: #7a5300;
    --input-bg: rgba(255, 255, 255, 0.96);
    --input-border: rgba(15, 51, 72, 0.16);
    --input-focus: rgba(15, 51, 72, 0.28);
    --input-text: #0b2636;
    --input-placeholder: rgba(15, 50, 71, 0.46);
    --button-secondary-bg: rgba(255, 255, 255, 0.16);
    --button-secondary-hover: rgba(255, 255, 255, 0.24);
    --button-secondary-border: rgba(255, 255, 255, 0.38);
    --header-button-text: #ffffff;
    --link-color: #0f3247;
    --progress-bg: rgba(15, 51, 72, 0.1);
    --progress-fill: #0f3247;
    --pill-bg: rgba(15, 51, 72, 0.08);
    --pill-border: rgba(15, 51, 72, 0.18);
    --disclaimer-bg: rgba(255, 255, 255, 0.94);
    --disclaimer-text: rgba(13, 43, 61, 0.74);
    --overlay-bg: rgba(15, 43, 61, 0.72);
    --header-gradient: linear-gradient(135deg, #0d2a3c 0%, #10344a 100%);
    --header-shadow: 0 12px 28px -18px rgba(1, 3, 4, 0.55);
    --select-bg: rgba(255, 255, 255, 0.94);
    --select-border: rgba(15, 51, 72, 0.22);
    --select-text: #0b2636;
    --scroll-track: rgba(236, 241, 245, 0.9);
    --scroll-thumb: rgba(15, 51, 72, 0.45);
    --scroll-thumb-hover: rgba(15, 51, 72, 0.65);
    --layout-top-offset: 8px;
    --layout-bottom-offset: 8px;
    --footer-h: 48px;
    --nav-h: 60px;
}

body.theme-dark {
    color-scheme: dark;
    --body-gradient: linear-gradient(135deg, #010304 0%, #02070a 45%, #0b2636 100%);
    --surface: rgba(2, 7, 10, 0.94);
    --surface-alt: rgba(2, 7, 10, 0.86);
    --border: rgba(76, 96, 128, 0.24);
    --shadow: 0 18px 30px -20px rgba(1, 4, 5, 0.6);
    --primary: #4ca7ff;
    --primary-hover: #2f8fe0;
    --primary-text: #f8fafc;
    --text-primary: #e0f2ff;
    --text-muted: rgba(168, 189, 214, 0.78);
    --assistant-bg: rgba(76, 167, 255, 0.12);
    --assistant-border: rgba(76, 167, 255, 0.28);
    --assistant-text: #d3e7ff;
    --user-bg: #0d6ea7;
    --user-border: rgba(59, 115, 157, 0.42);
    --user-text: #ecf6ff;
    --system-bg: rgba(245, 158, 11, 0.2);
    --system-border: rgba(245, 158, 11, 0.36);
    --system-text: #fcdca1;
    --input-bg: rgba(2, 11, 19, 0.96);
    --input-border: rgba(102, 141, 173, 0.34);
    --input-focus: rgba(76, 167, 255, 0.32);
    --input-text: #f8fafc;
    --input-placeholder: rgba(148, 174, 206, 0.6);
    --button-secondary-bg: rgba(8, 22, 32, 0.55);
    --button-secondary-hover: rgba(12, 30, 44, 0.72);
    --button-secondary-border: rgba(148, 174, 206, 0.36);
    --header-button-text: #e0f2ff;
    --link-color: #8ec5ff;
    --progress-bg: rgba(76, 167, 255, 0.2);
    --progress-fill: #4ca7ff;
    --pill-bg: rgba(76, 167, 255, 0.14);
    --pill-border: rgba(76, 167, 255, 0.32);
    --disclaimer-bg: rgba(1, 4, 5, 0.92);
    --disclaimer-text: rgba(210, 225, 237, 0.8);
    --overlay-bg: rgba(1, 4, 5, 0.85);
    --header-gradient: linear-gradient(135deg, #010405 0%, #0f3247 100%);
    --header-shadow: 0 14px 32px -20px rgba(1, 4, 5, 0.65);
    --select-bg: rgba(2, 11, 19, 0.9);
    --select-border: rgba(102, 141, 173, 0.34);
    --select-text: #ecf6ff;
    --scroll-track: rgba(4, 12, 22, 0.92);
    --scroll-thumb: rgba(122, 182, 255, 0.65);
    --scroll-thumb-hover: rgba(158, 204, 255, 0.85);
    --layout-top-offset: 8px;
    --layout-bottom-offset: 8px;
    --footer-h: 48px;
    --nav-h: 60px;
}

@media (max-width: 1024px) {
    :root {
        --layout-top-offset: 12px;
        --layout-bottom-offset: 12px;
        --footer-h: 48px;
        --nav-h: 60px;
    }
}

@media (max-width: 720px) {
    :root {
        --layout-top-offset: 12px;
        --layout-bottom-offset: 12px;
        --footer-h: 48px;
        --nav-h: 6px;
    }
}

@media (max-width: 480px) {
    :root {
        --layout-top-offset: 0;
        --layout-bottom-offset: 12px;
        --footer-h: 48px;
        --nav-h: 6px;
    }
}

html,
body {
    height: 100%;
}

body {
    font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
    background: var(--body-gradient);
    color: var(--text-primary);
    min-height: 100%;
    line-height: 1.5;
    transition: background 0.6s ease, color 0.25s ease;
    overflow: hidden;
}

body.main-app {
    display: flex;
    flex-direction: column;
    min-height: 100dvh;
    padding: 8px 0;
    gap: 4px;
}

.app {
    flex: 1 1 auto;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: clamp(4px, 1vw, 8px);
    height: 100%;
    min-height: 0;
}

.chat-header {
    background: var(--header-gradient);
    color: var(--header-button-text);
    padding: clamp(6px, 1.2vw, 10px) clamp(14px, 2.4vw, 22px);
    border-bottom: 1px solid var(--border);
    border-top-left-radius: 24px;
    border-top-right-radius: 24px;
    width: 100%;
}

.header-content {
    width: min(1200px, 100%);
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: clamp(14px, 3.2vw, 24px);
}

.header-brand {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.brand-abbrev {
    font-size: clamp(1.35rem, 2.6vw, 1.6rem);
    font-weight: 700;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: rgba(255, 255, 255, 0.95);
}

.brand-name {
    font-size: clamp(0.7rem, 1.2vw, 0.85rem);
    font-weight: 500;
    color: rgba(255, 255, 255, 0.72);
    letter-spacing: 0.12em;
}

.header-actions {
    display: flex;
    align-items: center;
    gap: clamp(12px, 2.4vw, 20px);
}

.header-actions .navbar-menu {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex-wrap: nowrap;
    flex: 1 1 auto;
    justify-content: flex-end;
}

/* Login page specific styles */
body.login-page {
    display: flex;
    justify-content: center;
    align-items: center;
    background: var(--header-gradient);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow: auto;
}

/* Navbar Styles */
.navbar {
    background: var(--header-gradient);
    color: var(--header-button-text);
    padding: 0;
    box-shadow: var(--header-shadow);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
}

.navbar-container {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.85rem 1.25rem;
}

.navbar-brand {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.navbar-brand h1 {
    font-size: 1.4rem;
    font-weight: 700;
    margin: 0;
    letter-spacing: 0.06em;
    color: rgba(255, 255, 255, 0.92);
}

.navbar-subtitle {
    font-size: 0.72rem;
    font-weight: 500;
    opacity: 0.8;
    margin-top: -1px;
    letter-spacing: 0.08em;
    color: rgba(255, 255, 255, 0.82);
}

.navbar-menu {
    display: flex;
    gap: 0.75rem;
    align-items: center;
}

.theme-toggle {
    position: relative;
    width: 56px;
    height: 28px;
    flex-shrink: 0;
}

.theme-toggle input {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    margin: 0;
    cursor: pointer;
    z-index: 2;
}

.theme-toggle-label {
    display: inline-flex;
    align-items: center;
    justify-content: space-between;
    gap: 4px;
    width: 100%;
    height: 100%;
    padding: 4px 6px;
    border-radius: 999px;
    border: 1px solid var(--button-secondary-border);
    background: var(--button-secondary-bg);
    backdrop-filter: blur(8px);
    transition: background 0.3s ease, border 0.3s ease;
    position: relative;
}

.theme-toggle input:focus-visible + .theme-toggle-label {
    outline: 2px solid var(--input-focus);
    outline-offset: 3px;
}

.toggle-icon {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    display: block;
    z-index: 2;
}

.sun-icon {
    background: radial-gradient(circle at 30% 30%, #ffe69a 0%, #ffc857 60%, #f4a261 100%);
    box-shadow: 0 0 6px rgba(255, 200, 87, 0.6);
}

.moon-icon {
    background: radial-gradient(circle at 30% 30%, #a0b4ff 0%, #6280ff 60%, #3b5bdb 100%);
    box-shadow: -2px 0 6px rgba(59, 91, 219, 0.4);
}

.toggle-slider {
    position: absolute;
    top: 4px;
    left: 4px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #ffffff;
    box-shadow: 0 3px 12px rgba(15, 23, 42, 0.25);
    transition: transform 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;
    z-index: 1;
}

.theme-toggle input:checked + .theme-toggle-label .toggle-slider {
    transform: translateX(28px);
}

body.theme-dark .theme-toggle-label {
    border: 1px solid var(--button-secondary-border);
    background: rgba(8, 22, 32, 0.55);
}

body.theme-dark .toggle-slider {
    background: #0f172a;
    box-shadow: 0 3px 12px rgba(15, 23, 42, 0.6);
}

.navbar-menu .theme-toggle {
    margin-left: 0.25rem;
}

.nav-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: var(--button-secondary-bg);
    border: 1px solid var(--button-secondary-border);
    border-radius: 999px;
    color: var(--header-button-text);
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.25s ease, border 0.25s ease, transform 0.25s ease;
    backdrop-filter: blur(10px);
}

.nav-btn:hover {
    background: var(--button-secondary-hover);
    transform: translateY(-1px);
}

.nav-btn.logout-btn:hover {
    background: linear-gradient(135deg, #f87171, #dc2626);
}

.nav-btn .material-icons {
    font-size: 1.05rem;
}

.admin-only {
    display: none;
}

/* Mobile navbar toggle */
.navbar-toggle {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    border: 1px solid var(--button-secondary-border);
    border-radius: 14px;
    background: var(--button-secondary-bg);
    color: var(--header-button-text);
    cursor: pointer;
    padding: 10px;
    transition: background 0.25s ease, border 0.25s ease, transform 0.25s ease;
}

.navbar-toggle:hover {
    background: var(--button-secondary-hover);
    transform: translateY(-1px);
}

.hamburger-line {
    width: 18px;
    height: 2px;
    background: currentColor;
    margin: 0;
    border-radius: 999px;
    transition: 0.3s;
}

.navbar-toggle.active .hamburger-line:nth-child(1) {
    transform: rotate(-45deg) translate(-5px, 6px);
}

.navbar-toggle.active .hamburger-line:nth-child(2) {
    opacity: 0;
}

.navbar-toggle.active .hamburger-line:nth-child(3) {
    transform: rotate(45deg) translate(-5px, -6px);
}

/* Mobile menu */
.navbar-mobile-menu {
    position: fixed;
    top: 0;
    left: -100%;
    width: 280px;
    height: 100vh;
    background: var(--surface);
    padding: 5rem 1rem 2rem;
    transition: left 0.3s ease;
    z-index: 999;
    box-shadow: 2px 0 20px -14px rgba(1, 4, 5, 0.5);
    color: var(--text-primary);
}

.navbar-mobile-menu.active {
    left: 0;
}

.nav-btn-mobile {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    width: 100%;
    padding: 0.85rem 1rem;
    background: var(--button-secondary-bg);
    border: 1px solid var(--button-secondary-border);
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 0.95rem;
    cursor: pointer;
    margin-bottom: 0.75rem;
    transition: background 0.3s ease, transform 0.3s ease;
    text-align: left;
}

.nav-btn-mobile:hover {
    background: var(--button-secondary-hover);
    transform: translateX(6px);
}

.nav-btn-mobile.logout-btn:hover {
    background: linear-gradient(135deg, #f87171, #dc2626);
}

.nav-btn-mobile .material-icons {
    font-size: 1.2rem;
    color: currentColor;
}

.navbar-mobile-menu .theme-toggle {
    margin: 1.25rem auto 0.5rem;
}

.chat-container {
    width: min(1200px, 100%);
    height: calc(100dvh - var(--layout-top-offset) - var(--layout-bottom-offset));
    max-height: none;
    margin: 0 auto;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 24px;
    box-shadow: var(--shadow);
    backdrop-filter: blur(18px);
    display: flex;
    flex-direction: column;
    flex: 1 1 auto;
    overflow: hidden;
}


.chat-display {
    flex: 1;
    padding: 22px 18px 10px;
    background: var(--surface-alt);
    display: flex;
    flex-direction: column;
    gap: 22px;
    overflow-y: auto;
    min-height: 0;
    scrollbar-color: var(--scroll-thumb) var(--scroll-track);
    scrollbar-width: thin;
}

.chat-welcome {
    padding: 24px 18px 8px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.chat-welcome-title {
    font-weight: 700;
    font-size: 1.15rem;
    color: var(--text-primary);
}

.chat-welcome.hidden {
    display: none;
}

@media (max-width: 720px) {
    .chat-welcome {
        padding: 18px 12px 6px;
    }
}

.chat-display::-webkit-scrollbar {
    width: 12px;
}

.chat-display::-webkit-scrollbar-track {
    background: var(--scroll-track);
    border-radius: 999px;
}

.chat-display::-webkit-scrollbar-thumb {
    background: var(--scroll-thumb);
    border-radius: 999px;
    border: 2px solid transparent;
    background-clip: content-box;
}

.chat-display::-webkit-scrollbar-thumb:hover {
    background: var(--scroll-thumb-hover);
    border: 2px solid transparent;
    background-clip: content-box;
}

.chat-footer {
    display: flex;
    flex-wrap: wrap;
    gap: 14px;
    padding: 12px 18px 10px;
    background: var(--surface);
    border-top: 1px solid var(--border);
    align-items: stretch;
}

/* .chat-footer input {
    flex: 1;
    padding: 10px;
    border: 1px solid #cccccc;
    border-radius: 5px;
    font-size: 16px;
} */

/* 
#messageInput {
    flex: 1;
    resize: none;
    min-height: 38px;
    max-height: 200px;
    overflow-y: auto;
    line-height: 1.5;
    padding: 8px;
    padding-left: 36px;
    font-family: inherit;
    transition: height 0.2s ease;
} */

#messageInput {
    width: 100%;
    min-height: 38px;
    max-height: 200px;
    resize: none;
    padding: 12px;
    font-family: inherit;
    font-size: 15px;
    line-height: 1.55;
    background: transparent;
    border: none;
    color: var(--input-text);
    z-index: 1;
    position: relative;
    caret-color: var(--primary);
}

#messageInput::placeholder {
    color: var(--input-placeholder);
}

#messageInput:focus,
#messageInput:focus-visible {
    outline: none;
}

.chat-footer button {
    padding: 0 24px;
    border-radius: 14px;
    border: none;
    background: var(--primary);
    color: var(--primary-text);
    font-weight: 600;
    font-size: 15px;
    letter-spacing: 0.01em;
    cursor: pointer;
    transition: background 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
    box-shadow: 0 14px 30px -18px rgba(15, 51, 72, 0.8);
    height: 48px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
}

.chat-footer button:hover:not(:disabled) {
    background: var(--primary-hover);
    transform: translateY(-1px);
}

.chat-footer button:disabled {
    opacity: 0.55;
    cursor: not-allowed;
    box-shadow: none;
}

#stopButton {
    background: linear-gradient(135deg, #f87171, #dc2626);
    box-shadow: 0 14px 30px -18px rgba(220, 38, 38, 0.85);
}

#stopButton:hover:not(:disabled) {
    background: linear-gradient(135deg, #f43f5e, #b91c1c);
}

.message {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.message.user {
    align-items: flex-end;
}

.message.assistant,
.message.computer {
    align-items: flex-start;
}

.message.system {
    align-items: center;
}

.message .content {
    max-width: min(70%, 680px);
    padding: 16px 20px;
    border-radius: 18px;
    border: 1px solid transparent;
    position: relative;
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 15px;
    line-height: 1.55;
    backdrop-filter: blur(2px);
}

.message.user .content {
    background: var(--user-bg);
    border-color: var(--user-border);
    color: var(--user-text);
    box-shadow: 0 16px 35px -26px rgba(15, 51, 72, 0.7);
}

.message.assistant .content,
.message.computer .content {
    background: var(--assistant-bg);
    border-color: var(--assistant-border);
    color: var(--assistant-text);
    box-shadow: 0 20px 48px -36px rgba(1, 4, 5, 0.4);
}

.message.assistant .content {
    white-space: normal;
}

.message.assistant .content > * {
    margin: 0.35em 0;
}

.message.assistant .content > :first-child {
    margin-top: 0;
}

.message.assistant .content > :last-child {
    margin-bottom: 0;
}

.message.assistant .content ul,
.message.assistant .content ol {
    margin: 0.35em 0;
    padding-left: 1.1em;
}

.message.assistant .content li {
    margin: 0.15em 0;
    line-height: 1.4;
}

.message.system .content {
    background: var(--system-bg);
    border-color: var(--system-border);
    color: var(--system-text);
    text-align: center;
    font-weight: 500;
}

.message .content img {
    max-width: 100%;
    border-radius: 14px;
    box-shadow: 0 14px 40px -30px rgba(1, 4, 5, 0.5);
}

.message .content pre {
    background: rgba(1, 4, 5, 0.9);
    color: #e2e8f0;
    padding: 14px;
    border-radius: 12px;
    overflow-x: auto;
}

body.theme-light .message .content pre {
    background: #0f172a;
}

.message .content code {
    font-family: 'JetBrains Mono', 'SFMono-Regular', Menlo, Consolas, monospace;
    font-size: 0.92em;
}

.message .content a {
    color: var(--link-color);
    text-decoration: none;
    border-bottom: 1px solid rgba(31, 79, 216, 0.3);
    transition: border 0.2s ease;
}

.message .content a:hover {
    border-bottom-color: var(--link-color);
}

/* Style for the copy button */
.copy-button {
    position: absolute;
    top: 8px;
    right: 8px;
    padding: 4px 10px;
    font-size: 12px;
    cursor: pointer;
    background-color: #007bff;
    color: #ffffff;
    border: none;
    border-radius: 6px;
    opacity: 0.92;
    transition: opacity 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
}

.copy-button:hover {
    opacity: 1;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.35);
}

/* Ensure the <pre> elements are positioned relatively to contain the absolute button */
pre {
    position: relative;
}

.console-output-message {
    display: none !important;
}

.stdout-controls {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    width: 100%;
    margin-top: 12px;
}

.stdout-controls.stdout-hidden {
    display: none;
}

.stdout-button {
    padding: 6px 14px;
    font-size: 12px;
    border-radius: 999px;
    border: 1px solid var(--input-border);
    background: var(--surface);
    color: var(--text-primary);
    cursor: pointer;
    transition: background 0.2s ease, border 0.2s ease, transform 0.2s ease;
}

.stdout-button:hover:not(:disabled) {
    background: var(--assistant-bg);
    border-color: var(--assistant-border);
    transform: translateY(-1px);
}

.stdout-button:disabled {
    cursor: not-allowed;
    opacity: 0.5;
}

.stdout-panel {
    display: none;
    margin-top: 10px;
    padding: 12px;
    border-radius: 12px;
    border: 1px solid var(--border);
    background: rgba(15, 23, 42, 0.55);
    max-height: 260px;
    overflow-y: auto;
    box-shadow: inset 0 6px 18px rgba(2, 6, 23, 0.35);
}

.stdout-panel.open {
    display: block;
}

.stdout-entry + .stdout-entry {
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid rgba(255, 255, 255, 0.08);
}

.stdout-panel pre {
    margin: 0;
    background: transparent;
    padding: 0;
}

.stdout-panel pre code {
    display: block;
    white-space: pre-wrap;
    word-break: break-word;
    font-family: 'JetBrains Mono', 'SFMono-Regular', Menlo, Consolas, monospace;
    font-size: 0.9em;
}

.stdout-empty {
    font-size: 13px;
    color: var(--text-muted);
}

.disclaimer-text {
    width: 100%;
    padding: 10px 18px;
    background: var(--disclaimer-bg);
    color: var(--disclaimer-text);
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: center;
    gap: 6px;
    font-size: 12px;
    flex: 0 0 auto;
}

.disclaimer-text a {
    color: var(--link-color);
    text-decoration: none;
}

.disclaimer-text a:hover {
    text-decoration: underline;
}

@media (max-width: 720px) {
    .disclaimer-text {
        padding: 10px 14px;
    }
}

@media (max-width: 480px) {
    .disclaimer-text {
        padding: 8px 12px;
        font-size: 11px;
    }
}

#myselect2{
    margin-top: 5px;
    max-width: 100%;
  }

#promptIdeasContainer {
    width: 100%;
    flex: 0 0 auto;
}

#promptIdeasContainer:empty {
    display: none;
}

.prompt-examples-section {
    padding: 12px 18px 10px;
    background: var(--surface);
    border-top: 1px solid var(--border);
}

.prompt-examples-section.hidden {
    display: none;
}

.prompt-examples-title {
    margin: 0 0 8px;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-muted);
}

.prompt-examples-section .prompt-ideas {
    margin-top: 2px;
}

.prompt-ideas {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    background: transparent;
    border: none;
    padding: 0;
    margin: 0;
    justify-content: flex-start;
}

.prompt-button {
    padding: 10px 18px;
    border-radius: 999px;
    border: 1px solid var(--user-border);
    background: var(--user-bg);
    color: var(--user-text);
    font-weight: 600;
    cursor: pointer;
    font-size: 13px;
    transition: background 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
    box-shadow: 0 14px 28px -18px rgba(13, 110, 167, 0.85);
}

.prompt-button:hover {
    transform: translateY(-1px);
    background: var(--primary-hover);
    border-color: var(--user-border);
}

.active-line {
    background-color: rgba(255, 255, 0, 0.12);
    padding: 2px 4px;
    border-radius: 4px;
}

.code-line.active-line:not(:last-of-type) {
    background-color: rgba(255, 255, 0, 0.1);
}

.code-spinner {
    position: absolute;
    bottom: 12px;
    left: 12px;
    width: 52px;
    height: 52px;
    border: 3px solid rgba(255, 255, 255, 0.18);
    border-top: 3px solid rgba(255, 255, 255, 0.75);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes pulse {
    0%, 100% {
        opacity: 0.35;
        transform: translateY(0);
    }
    50% {
        opacity: 1;
        transform: translateY(-2px);
    }
}

.thinking-content {
    display: flex;
    align-items: center;
    gap: 12px;
}

.thinking-spinner {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 2px solid var(--pill-border);
    border-top-color: transparent;
    animation: spin 0.75s linear infinite;
}

.message.assistant.thinking .content {
    background: var(--pill-bg);
    border-color: var(--pill-border);
    color: var(--text-muted);
    display: inline-flex;
    align-items: center;
    gap: 12px;
    font-weight: 500;
    letter-spacing: 0.01em;
}

.thinking-ellipsis {
    display: inline-flex;
    gap: 4px;
}

.thinking-ellipsis span {
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: currentColor;
    opacity: 0.35;
    animation: pulse 1.2s infinite ease-in-out;
}

.thinking-ellipsis span:nth-child(2) {
    animation-delay: 0.2s;
}

.thinking-ellipsis span:nth-child(3) {
    animation-delay: 0.4s;
}

.prompt-row {
    display: flex;
    align-items: stretch;
    gap: 12px;
    width: 100%;
    flex-wrap: nowrap;
    flex: 1 1 auto;
}

.prompt-row .input-container {
    flex: 1 1 auto;
    min-width: 0;
}

.prompt-actions {
    display: flex;
    flex-direction: column;
    gap: 8px;
    flex: 0 0 auto;
    align-items: stretch;
    min-width: 112px;
}

.prompt-actions button {
    padding: 0 16px;
    min-width: 0;
    height: 40px;
    box-shadow: 0 10px 24px -18px rgba(15, 51, 72, 0.75);
    width: 100%;
}

@media (max-width: 1200px) {
    .header-content {
        flex-direction: row;
        align-items: center;
        gap: 12px;
    }

    .header-actions {
        justify-content: flex-end;
        width: 100%;
        gap: 12px;
    }

    .header-actions .navbar-menu {
        display: none;
    }

    .navbar-toggle {
        display: flex;
    }

    .chat-container {
        border-radius: 20px;
    }

    .chat-display {
        padding: 20px 18px;
    }

    .chat-footer {
        padding: 12px 16px 12px;
    }
}

@media (max-width: 720px) {
    body.main-app {
        gap: 0;
        padding: 0;
    }

    .app {
        align-items: stretch;
        gap: 0;
    }

    .header-actions {
        flex-direction: column;
        align-items: stretch;
        gap: 12px;
    }

    .header-actions .navbar-menu {
        display: none;
    }

    .navbar-container {
        padding: 0.75rem 1rem;
    }

    .navbar-toggle {
        display: flex;
    }

    .chat-container {
        width: 100%;
        border-radius: 0;
        border: none;
        box-shadow: none;
        height: 100dvh;
        margin: 0;
        backdrop-filter: none;
    }

    .chat-display {
        padding: 18px 12px 6px;
    }

    .chat-footer {
        flex-direction: column;
        align-items: stretch;
        gap: 12px;
        padding: 10px 12px 12px;
    }

    .prompt-row {
        flex-direction: row;
        align-items: stretch;
        gap: 10px;
    }

    .prompt-actions {
        flex-direction: column;
        gap: 8px;
        min-width: 88px;
    }

    .prompt-actions button {
        min-width: 0;
        height: 38px;
        padding: 0 12px;
    }

    #messageInput {
        padding: 12px;
    }

    #uploadButton {
        left: auto;
    }

    #micButton {
        right: auto;
    }

    .chat-header {
        border-radius: 0;
    }
}

@media (max-width: 480px) {
    body.main-app {
        gap: 0;
        padding: 0;
    }

    .header-actions .navbar-menu {
        justify-content: flex-start;
    }

    .chat-container {
        border-radius: 0;
    }

    .chat-display {
        padding: 16px 10px 4px;
    }

    .chat-footer button {
        font-size: 14px;
    }

    .chat-footer {
        padding: 10px 10px 12px;
    }

    .prompt-actions {
        min-width: 80px;
    }

    .prompt-actions button {
        height: 36px;
    }
}

#uploadButton {
    position: relative;
    left: auto;
    background: none;
    border: none;
    padding: 4px;
    color: var(--text-muted);
    cursor: pointer;
    z-index: 1;
    box-shadow: none;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.25s ease;
}

#uploadButton:hover {
    color: var(--primary);
}

#uploadButton svg {
    width: 22px;
    height: 22px;
}

#uploadButton::after {
    content: "Max file size: 10MB";
    position: absolute;
    bottom: 6px;
    left: 55%;
    transform: translate(1px, 100%);
    background: rgba(15, 33, 47, 0.88);
    color: #ffffff;
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 12px;
    white-space: nowrap;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
}

#uploadButton:hover::after {
    visibility: visible;
    opacity: 1;
}

#micButton::after {
    content: "Dictate";
    position: absolute;
    bottom: 6px;
    right: 55%;
    transform: translate(1px, 100%);
    background: rgba(15, 33, 47, 0.88);
    color: #ffffff;
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 12px;
    white-space: nowrap;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
}

#micButton:hover::after {
    visibility: visible;
    opacity: 1;
}

.input-container button:focus,
.input-container button:focus-visible {
    outline: none;
}


.input-header {
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-bottom: 6px;
}

.attached-files-inline {
    display: none;
    flex-wrap: wrap;
    gap: 6px;
    font-size: 11px;
    color: var(--text-muted);
    width: 100%;
    align-items: center;
}

.attached-files-inline.active {
    display: flex;
}

.attached-file {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    border: 1px solid var(--assistant-border);
    border-radius: 999px;
    background: transparent;
}

.attached-file-name {
    white-space: nowrap;
}

.attached-file .remove-attachment {
    background: transparent;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 11px;
    line-height: 1;
    padding: 0;
    width: 14px;
    height: 14px;
    min-width: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    box-shadow: none;
}

.attached-file .remove-attachment:hover {
    color: #ef4444;
}

.file-attachment {
    display: flex;
    align-items: center;
    gap: 8px;
}

.attachment-icon {
    font-size: 18px;
    color: var(--text-muted);
}

.attachment-details {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.attachment-name {
    font-weight: 600;
    color: var(--text-primary);
}

.attachment-path {
    font-size: 12px;
    color: var(--text-muted);
    word-break: break-all;
}

.uploaded-image-preview {
    max-width: min(220px, 40vw);
    border-radius: 10px;
    border: 1px solid var(--assistant-border);
}

.user-message-wrapper {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.message.user .user-attachment-line {
    font-size: 13px;
    line-height: 1.4;
    color: rgba(255, 255, 255, 0.9);
}

.message.user .user-attachment-line strong {
    font-weight: 600;
    margin-right: 4px;
}

.progress-bar {
    width: 100%;
    height: 4px;
    background: var(--progress-bg);
    border-radius: 999px;
    overflow: hidden;
}

.progress {
    width: 0;
    height: 100%;
    background: var(--progress-fill);
    transition: width 0.25s ease;
}

.myselect {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 10px 0;
}

.myselect label {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    max-width: 600px; /* Adjust this value as needed */
}

#myselect2 {
    margin-top: 5px;
    flex: 1;
    max-width: 100%;
    padding: 8px 12px;
    border-radius: 10px;
    border: 1px solid var(--select-border);
    background: var(--select-bg);
    color: var(--select-text);
    font-size: 14px;
    outline: none;
    transition: border 0.25s ease, box-shadow 0.25s ease;
}

#myselect2:focus {
    border-color: var(--input-focus);
    box-shadow: 0 0 0 3px rgba(15, 51, 72, 0.18);
}



/* Add styles for the Upload Files Dropzone */
.input-container {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    flex: 1 1 360px;
    padding: 10px 12px;
    border-radius: 16px;
    background: var(--input-bg);
    border: 1px solid var(--input-border);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.04);
    transition: border 0.25s ease, box-shadow 0.25s ease;
    gap: 6px;
    overflow: hidden;
}

.input-container:focus-within {
    border-color: var(--input-focus);
    box-shadow: 0 0 0 3px rgba(15, 51, 72, 0.16);
}

.input-main {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
}

.input-main button {
    position: relative;
    z-index: 1;
    flex: 0 0 auto;
}

.input-main textarea {
    position: relative;
    z-index: 1;
    flex: 1 1 auto;
}

.drop-overlay {
    position: absolute;
    inset: 0;
    background: var(--overlay-bg);
    border: 2px dashed rgba(148, 163, 184, 0.45);
    display: none;
    align-items: center;
    justify-content: center;
    text-align: center;
    font-size: 0.95em;
    color: #e0f2fe;
    border-radius: 14px;
    pointer-events: none;
    z-index: 999;
}

.drop-overlay.show {
    display: flex;
}

#micButton {
    position: relative;
    right: auto;
    top: auto;
    transform: none;
    background: none;
    border: none;
    padding: 4px;
    margin: 0;
    color: var(--text-muted);
    cursor: pointer;
    z-index: 1;
    box-shadow: none;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.25s ease;
}

#micButton:hover {
    color: var(--primary);
}

#micButton.recording {
    color: #f87171;
}

#micButton i.material-icons {
    font-size: 20px;
}

/* Login Page Styles */
.login-container {
    background: var(--surface);
    color: var(--text-primary);
    padding: 2rem;
    border-radius: 12px;
    box-shadow: var(--shadow);
    width: 100%;
    max-width: 420px;
    border: 1px solid var(--border);
    transition: background 0.3s ease, color 0.3s ease;
}

.login-header {
    text-align: center;
    margin-bottom: 2rem;
}

.login-header h1 {
    color: var(--text-primary);
    margin-bottom: 0.35rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
}

.login-header p {
    color: var(--text-muted);
    font-size: 0.95rem;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--text-primary);
    font-weight: 500;
}

.form-group input[type="text"], 
.form-group input[type="password"] {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid var(--input-border);
    border-radius: 8px;
    background: var(--input-bg);
    color: var(--input-text);
    font-size: 1rem;
    transition: border-color 0.3s ease;
    box-sizing: border-box;
}

.form-group input[type="text"]:focus, 
.form-group input[type="password"]:focus {
    outline: none;
    border-color: var(--input-focus);
}

/* Account Settings Styles */
.account-info-section {
    margin-bottom: 1.5rem;
}

.account-info-section h3 {
    margin-bottom: 1rem;
    color: #333;
    font-size: 1.1rem;
}

.form-group input[type="email"][readonly] {
    background-color: #f8f9fa;
    border-color: #e9ecef;
    color: #6c757d;
    cursor: not-allowed;
}

.form-group input[type="email"][readonly]:focus {
    border-color: #e9ecef;
    box-shadow: none;
}

.login-button {
    width: 100%;
    padding: 0.75rem;
    background: var(--header-gradient);
    color: white;
    border: none;
    border-radius: 5px;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.login-button:hover {
    transform: translateY(-2px);
}

.login-button:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    transform: none;
}

.error-message {
    background: #fee;
    color: #c33;
    padding: 0.75rem;
    border-radius: 5px;
    margin-bottom: 1rem;
    display: none;
}

.success-message {
    background: #efe;
    color: #3c3;
    padding: 0.75rem;
    border-radius: 5px;
    margin-bottom: 1rem;
    display: none;
}

.footer-text {
    text-align: center;
    margin-top: 2rem;
    color: #666;
    font-size: 0.9rem;
}

.footer-text a {
    color: #667eea;
    text-decoration: none;
}

.footer-text a:hover {
    text-decoration: underline;
}

/* Mobile overlay for menu */
.mobile-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--overlay-bg);
    display: none;
    z-index: 998;
}

.mobile-overlay.active {
    display: block;
}

/* Mobile Responsive Styles */
@media (max-width: 768px) {
    .navbar-menu {
        display: none;
    }
    
    .navbar-toggle {
        display: flex;
    }
    
    .navbar-brand h1 {
        font-size: 1.5rem;
    }
    
    .navbar-subtitle {
        font-size: 0.7rem;
    }
    
    .chat-container {
        margin: 0;
        height: 100dvh;
        max-height: none;
        border-radius: 0;
        border: none;
        box-shadow: none;
        width: 100%;
    }
    
    .login-container {
        margin: 1rem;
        max-width: calc(100vw - 2rem);
    }
}

@media (max-width: 480px) {
    .navbar-brand h1 {
        font-size: 1.3rem;
    }
    
    .navbar-subtitle {
        font-size: 0.65rem;
    }
    
    .navbar-container {
        padding: 0.5rem 1rem;
    }
    
    .chat-container {
        margin: 0;
        height: 100dvh;
        max-height: none;
        border-radius: 0;
    }
}

/* Prompt Management Modal Styles */
.modal {
    display: none;
    position: fixed;
    z-index: 2000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
}

.modal-content {
    background-color: #fefefe;
    margin: 2% auto;
    padding: 0;
    border: none;
    width: 95%;
    max-width: 1200px;
    height: 90vh;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    display: flex;
    flex-direction: column;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem 2rem;
    background: var(--header-gradient);
    color: white;
    border-radius: 12px 12px 0 0;
}

.modal-header h2 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 600;
}

.close {
    color: white;
    float: right;
    font-size: 2rem;
    font-weight: bold;
    cursor: pointer;
    transition: opacity 0.2s ease;
}

.close:hover,
.close:focus {
    opacity: 0.7;
    text-decoration: none;
}

.modal-body {
    flex: 1;
    padding: 2rem;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.prompt-management-container {
    display: flex;
    height: 100%;
}

.prompt-list-section {
    width: 350px;
    border-right: 1px solid #e0e0e0;
    background-color: #f8f9fa;
    display: flex;
    flex-direction: column;
}

.section-header {
    padding: 0.5rem;
    border-bottom: 1px solid #e0e0e0;
    background-color: white;
}

.section-header h3 {
    margin: 0 0 1rem 0;
    font-size: 1.1rem;
    color: #333;
}

.btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 6px;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
    font-family: inherit;
}

.btn-primary {
    background: var(--header-gradient);
    color: white;
}

.btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.btn-success {
    background: #28a745;
    color: white;
}

.btn-success:hover {
    background: #218838;
}

.btn-secondary {
    background: #6c757d;
    color: white;
}

.btn-secondary:hover {
    background: #5a6268;
}

.btn-favorite {
    background: #ffc107;
    color: white;
}

.btn-favorite:hover {
    background: #e0a800;
}

.btn-favorite:hover {
    background: #e0a800;
}


.btn-danger {
    background: #dc3545;
    color: white;
    font-size: 0.8rem;
    padding: 0.25rem 0.5rem;
}

.btn-danger:hover {
    background: #c82333;
}

.btn .material-icons {
    font-size: 1rem;
}

.btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    box-shadow: none;
}

.prompts-list {
    flex: 1;
    overflow-y: auto;
    padding: 0;
}

.prompt-item {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #e0e0e0;
    cursor: pointer;
    transition: background-color 0.2s ease;
    background-color: white;
}

.prompt-item:hover {
    background-color: #f1f3f4;
}

.prompt-item.active {
    background-color: #e3f2fd;
    border-left: 4px solid #2196f3;
}

.prompt-item-content {
    flex: 1;
    min-width: 0;
}

.prompt-item-name {
    font-weight: 600;
    font-size: 0.95rem;
    color: #333;
    margin-bottom: 0.25rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.prompt-item-description {
    font-size: 0.8rem;
    color: #666;
    margin-bottom: 0.5rem;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.prompt-item-meta {
    font-size: 0.75rem;
    color: #888;
}

.active-badge {
    background: #4caf50;
    color: white;
    font-size: 0.7rem;
    padding: 0.15rem 0.4rem;
    border-radius: 12px;
    font-weight: 500;
}

.prompt-item-actions {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.prompt-item:hover .prompt-item-actions {
    opacity: 1;
}

.user-management-container {
    background-color: #ffffff;
}

.user-form {
    padding: 2rem;
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
}

.user-item-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 0.75rem;
}

.status-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.6rem;
    border-radius: 999px;
    font-size: 0.7rem;
    font-weight: 600;
    letter-spacing: 0.02em;
    text-transform: uppercase;
}

.status-badge.badge-superuser {
    background: #3f51b5;
    color: white;
}

.status-badge.badge-active {
    background: #28a745;
    color: white;
}

.status-badge.badge-inactive {
    background: #dee2e6;
    color: #495057;
}

.user-item-actions {
    opacity: 1;
    gap: 0.5rem;
}

.user-item-actions .btn {
    padding: 0.35rem 0.75rem;
    font-size: 0.8rem;
}

.user-list .empty-state,
.user-list .list-error {
    margin: 1.5rem;
    padding: 1rem;
    border-radius: 8px;
    text-align: center;
    font-size: 0.9rem;
}

.user-list .empty-state {
    background: #f8f9fa;
    color: #555;
}

.user-list .list-error {
    background: #fdecea;
    color: #a71d2a;
    border: 1px solid #f5c2c7;
}

.form-helper {
    margin-top: 0.5rem;
    font-size: 0.8rem;
    color: #666;
}

.checkbox-group {
    display: flex;
    align-items: center;
}

.checkbox-group label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 500;
    color: #333;
    margin: 0;
}

.checkbox-group input[type="checkbox"] {
    width: auto;
    height: auto;
    margin: 0;
    accent-color: #667eea;
}

.checkbox-group label span {
    line-height: 1.2;
}

.prompt-editor-section {
    flex: 1;
    display: flex;
    flex-direction: column;
    background-color: white;
    overflow: hidden;
}

.prompt-editor {
    padding: 2rem;
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
}

.prompt-editor h3 {
    margin: 0 0 1.5rem 0;
    color: #333;
}

.prompt-preview {
    padding: 2rem;
    text-align: center;
    color: #666;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    flex: 1;
}

.prompt-preview h3 {
    margin-bottom: 1rem;
    color: #333;
}

#promptForm {
    display: flex;
    flex-direction: column;
    flex: 1;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: #333;
}

.form-group input,
.form-group textarea {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 0.9rem;
    font-family: inherit;
    transition: border-color 0.2s ease;
}

.form-group input:focus,
.form-group textarea:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);
}

.form-group textarea {
    resize: vertical;
    height: 200px;
    max-height: 400px;
    min-height: 150px;
    font-family: 'Courier New', monospace;
    line-height: 1.4;
}

.form-actions {
    display: flex;
    gap: 1rem;
    margin-top: 1rem;
    padding-top: 1rem;
    flex-shrink: 0;
}

.form-message {
    margin-top: 0.5rem;
    font-size: 0.9rem;
    min-height: 1.1rem;
}

.form-message.error {
    color: #dc3545;
}

.form-message.success {
    color: #28a745;
}

/* Mobile responsiveness for prompt management */
@media (max-width: 768px) {
    .modal-content {
        width: 98%;
        height: 95vh;
        margin: 1% auto;
    }
    
    .prompt-management-container {
        flex-direction: column;
    }
    
    .prompt-list-section {
        width: 100%;
        max-height: 300px;
        border-right: none;
        border-bottom: 1px solid #e0e0e0;
    }
    
    .prompt-editor-section {
        flex: 1;
    }
    
    .modal-header {
        padding: 1rem;
    }
    
    .modal-header h2 {
        font-size: 1.3rem;
    }
    
    .section-header {
        padding: 0.5rem;
    }
    
    .prompt-item {
        padding: 0.75rem 1rem;
    }
    
    .prompt-editor {
        padding: 1rem;
    }
    
    .form-group textarea {
        height: 150px;
        min-height: 120px;
        max-height: 250px;
    }
}

@media (max-width: 480px) {
    .modal-content {
        width: 100%;
        height: 100vh;
        margin: 0;
        border-radius: 0;
    }
    
    .modal-header {
        border-radius: 0;
    }
    
    .prompt-item-actions {
        opacity: 1;
    }
    
    .form-actions {
        flex-direction: column;
    }
    
    .btn {
        width: 100%;
        justify-content: center;
    }
}

/* Knowledge Base Styles */
.knowledge-base-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    height: 100%;
    overflow: hidden;
}

.upload-section {
    border: 2px dashed #ddd;
    border-radius: 8px;
    padding: 0.75rem;
    background: #fafafa;
    transition: all 0.3s ease;
    flex-shrink: 0; /* Prevent from growing */
    max-height: 200px; /* Limit maximum height */
}

.upload-section:hover {
    border-color: #667eea;
    background: #f8f9ff;
}

.upload-area {
    text-align: center;
    padding: 0.75rem;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.upload-area.drag-over {
    border-color: #667eea;
    background: #e8edff;
}

.upload-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
}

.upload-icon {
    font-size: 1.5rem !important;
    color: #667eea;
}

.upload-info {
    display: flex;
    flex-direction: column;
    gap: 0;
    font-size: 0.8rem;
    color: #666;
    text-align: center;
    line-height: 1.2;
}

.papers-list-section {
    flex: 1;
    min-height: 50vh; /* At least half the viewport height */
    height: calc(100% - 220px); /* Take remaining space after upload section */
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.knowledge-base-stats {
    display: flex;
    gap: 1rem;
    font-size: 0.9rem;
    color: #666;
}

.papers-list {
    flex: 1;
    overflow-y: auto;
    border: 1px solid #ddd;
    border-radius: 6px;
    background: white;
    min-height: 0; /* Important for flex children to be scrollable */
}

.paper-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    border-bottom: 1px solid #eee;
    transition: background-color 0.2s ease;
}

.paper-item:last-child {
    border-bottom: none;
}

.paper-item:hover {
    background: #f8f9ff;
}

.paper-info {
    flex: 1;
    min-width: 0;
}

.paper-name {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.25rem;
}

.file-icon {
    color: #667eea;
    font-size: 1.2rem !important;
}

.filename {
    font-weight: 500;
    color: #333;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.paper-meta {
    display: flex;
    gap: 1rem;
    font-size: 0.85rem;
    color: #666;
}

.paper-actions {
    display: flex;
    gap: 0.5rem;
    margin-left: 1rem;
}

.btn-sm {
    font-size: 0.8rem;
    padding: 0.4rem 0.8rem;
}

.btn-sm .material-icons {
    font-size: 1rem !important;
}

.no-papers, .loading, .error {
    text-align: center;
    padding: 2rem;
    color: #666;
    font-style: italic;
}

.error {
    color: #f44336;
}

/* Progress bar for knowledge base uploads */
#knowledgeBaseUploadProgress {
    margin-top: 1rem;
}

/* Toast notifications */
.toast {
    animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Mobile responsiveness for knowledge base */
@media (max-width: 768px) {
    .knowledge-base-container {
        gap: 1.5rem;
        max-height: 60vh;
    }
    
    .upload-section {
        padding: 1rem;
    }
    
    .upload-area {
        padding: 1rem;
    }
    
    .upload-icon {
        font-size: 2rem !important;
    }
    
    .paper-item {
        flex-direction: column;
        align-items: stretch;
        gap: 0.75rem;
    }
    
    .paper-actions {
        margin-left: 0;
        justify-content: flex-end;
    }
    
    .knowledge-base-stats {
        flex-direction: column;
        gap: 0.25rem;
    }
    
    .papers-list {
        max-height: 250px;
    }
}

@media (max-width: 480px) {
    .upload-content p {
        font-size: 0.9rem;
    }
    
    .paper-meta {
        flex-direction: column;
        gap: 0.25rem;
    }
    
    .filename {
        font-size: 0.9rem;
    }
}

/* Unused: Console output */
.message .content[data-type="console"] {
  font-family: monospace;
  white-space: pre-wrap; /* preserve newlines */
}

/* Conversation UI Styles */
.wide-modal .modal-content {
    width: 90%;
    max-width: 1000px;
    max-height: 90vh;
}

.conversations-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    height: 70vh;
}

.conversations-header {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #e0e0e0;
}

.search-section {
    display: flex;
    gap: 1rem;
    align-items: center;
}

.search-input {
    flex: 1;
    padding: 0.5rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1rem;
}

.filter-section {
    display: flex;
    gap: 0.5rem;
}

.filter-section .btn {
    padding: 0.5rem 1rem;
    background: #f5f5f5;
    border: 1px solid #ddd;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.filter-section .btn.active {
    background: #667eea;
    color: white;
    border-color: #667eea;
}

/* Favorite button specific styling in filter section */
.filter-section .btn-favorite {
    background: #ffc107;
    color: white;
    border-color: #ffc107;
}

.filter-section .btn-favorite:hover {
    background: #e0a800;
    border-color: #e0a800;
}

.filter-section .btn-favorite.active {
    background: #e0a800;
    color: white;
    border-color: #e0a800;
}

.conversations-list {
    flex: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.conversation-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    background: white;
    cursor: pointer;
    transition: all 0.2s ease;
}

.conversation-item:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    border-color: #667eea;
}

.conversation-item.current {
    border-color: #667eea;
    background: #f8f9ff;
}

.conversation-content {
    flex: 1;
    min-width: 0;
}

.conversation-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 1rem;
}

.conversation-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #333;
    margin: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 400px;
}

.conversation-meta {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: #666;
    flex-shrink: 0;
}

.conversation-date {
    white-space: nowrap;
}

.favorite-indicator,
.shared-indicator {
    font-size: 1rem !important;
    color: #667eea;
}

.conversation-actions {
    display: flex;
    gap: 0.25rem;
    flex-shrink: 0;
}

.action-btn {
    padding: 0.5rem;
    background: none;
    border: none;
    cursor: pointer;
    border-radius: 4px;
    color: #666;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.action-btn:hover {
    background: #f0f0f0;
    color: #333;
}

.action-btn.active,
.favorite-btn.active {
    color: #667eea;
}

.delete-btn:hover {
    color: #dc3545;
    background: #ffeaea;
}

.action-btn .material-icons {
    font-size: 1.2rem !important;
}

.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    padding: 3rem;
    color: #666;
    text-align: center;
}

.empty-state .material-icons {
    font-size: 3rem !important;
    color: #ccc;
}

.empty-state-subtitle {
    font-size: 0.875rem;
    color: #999;
}

.loading {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 3rem;
    color: #666;
}

/* Message type badges */
.message-type-badge {
    display: inline-block;
    padding: 0.2rem 0.5rem;
    background: #667eea;
    color: white;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 500;
    margin-left: 0.5rem;
}

.console-content {
    background: #1e1e1e;
    color: #fff;
    border-radius: 4px;
    padding: 1rem;
    font-family: 'Courier New', monospace;
    overflow-x: auto;
}

/* Notifications */
.notification {
    position: fixed;
    top: 100px;
    right: 20px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    padding: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    z-index: 3001;
    transform: translateX(400px);
    opacity: 0;
    transition: all 0.3s ease;
    max-width: 300px;
}

.notification.show {
    transform: translateX(0);
    opacity: 1;
}

.notification.success {
    border-left: 4px solid #28a745;
}

.notification.error {
    border-left: 4px solid #dc3545;
}

.notification.warning {
    border-left: 4px solid #ffc107;
}

.notification.info {
    border-left: 4px solid #17a2b8;
}

.notification .material-icons {
    font-size: 1.2rem !important;
}

/* Mobile responsiveness for conversations */
@media (max-width: 768px) {
    .wide-modal .modal-content {
        width: 95%;
        max-height: 85vh;
    }
    
    .conversations-header {
        gap: 0.75rem;
    }
    
    .search-section {
        flex-direction: column;
        gap: 0.75rem;
    }
    
    .conversation-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
    }
    
    .conversation-title {
        max-width: none;
        white-space: normal;
        overflow: visible;
        text-overflow: unset;
    }
    
    .conversation-meta {
        font-size: 0.8rem;
    }
    
    .conversation-actions {
        gap: 0.125rem;
    }
    
    .action-btn {
        padding: 0.375rem;
    }
    
    .action-btn .material-icons {
        font-size: 1.1rem !important;
    }
}
