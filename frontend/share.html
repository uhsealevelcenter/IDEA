<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shared Conversation - IDEA</title>
    <link rel="stylesheet" href="../assets/styles.css">
    <link href="../assets/prism.css" rel="stylesheet" />  <!-- Prism for code syntax highlighting -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        /* Override styles for shared view */
        .shared-view {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            background-color: var(--background-color);
            min-height: 100vh;
        }
        
        .shared-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .shared-title {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .shared-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }
        
        .shared-conversation-meta {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 15px 0;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .shared-conversation-title {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin: 10px 0;
        }
        
        /* Adjust chat display for shared view */
        .shared-chat-display {
            background: var(--card-background);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .shared-footer {
            text-align: center;
            padding: 20px;
            border-top: 1px solid var(--border-color);
            background: var(--card-background);
            margin-top: 40px;
        }
        
        .shared-footer-text {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .loading-message {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        
        .error-message {
            text-align: center;
            padding: 40px;
            color: var(--error-color);
            font-size: 1.1rem;
        }
        
        .empty-conversation {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
        }
        
        .empty-conversation .material-icons {
            font-size: 3rem;
            margin-bottom: 10px;
            opacity: 0.5;
        }
    </style>
</head>
<body class="shared-view">
    <!-- Shared Conversation Header -->
    <div class="shared-header">
        <h1 class="shared-title">IDEA</h1>
        <p class="shared-subtitle">Shared Conversation</p>
        <div id="conversationInfo" class="shared-conversation-meta">
            <!-- Conversation metadata will be populated here -->
        </div>
    </div>

    <!-- Loading State -->
    <div id="loadingState" class="loading-message">
        <span class="material-icons" style="font-size: 2rem; margin-bottom: 10px;">hourglass_empty</span>
        <p>Loading shared conversation...</p>
    </div>

    <!-- Error State -->
    <div id="errorState" class="error-message" style="display: none;">
        <span class="material-icons" style="font-size: 2rem; margin-bottom: 10px;">error</span>
        <p id="errorMessage">Failed to load conversation</p>
    </div>

    <!-- Chat Display Container -->
    <div id="chatContainer" class="shared-chat-display" style="display: none;">
        <div id="chatDisplay" class="chat-display"></div>
    </div>

    <!-- Empty Conversation State -->
    <div id="emptyState" class="empty-conversation" style="display: none;">
        <span class="material-icons">chat_bubble_outline</span>
        <p>This conversation has no messages</p>
    </div>

    <!-- Shared Footer -->
    <div class="shared-footer">
        <p class="shared-footer-text">
            This is a shared conversation from IDEA (Intelligent Data Exploring Assistant)
        </p>
    </div>

    <!-- Scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.1.6/purify.min.js" integrity="sha512-jB0TkTBeQC9ZSkBqDhdmfTv1qdfbWpGE72yJ/01Srq6hEzZIz2xkz1e57p9ai7IeHMwEG7HpzG6NdptChif5Pg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="../assets/prism.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    <script src="../assets/config.js"></script>
    <script src="../assets/share.js"></script>
</body>
</html>