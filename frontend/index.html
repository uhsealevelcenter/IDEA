<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IDEA</title>
    <link rel="stylesheet" href="styles.css">
    <link href="prism.css" rel="stylesheet" />  <!-- Prism for code syntax highlighting -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> <!-- Mic icon -->
</head>
<body class="main-app theme-light">
    <div class="app">
        <div class="chat-container">
            <header class="chat-header">
                <div class="header-content">
                    <div class="header-brand">
                        <span class="brand-abbrev">IDEA</span>
                        <span class="brand-name">Intelligent Data Exploring Assistant</span>
                    </div>
                    <div class="header-actions">
                        <div class="navbar-menu" id="headerMenu">
                            <button id="systemPromptButton" class="nav-btn">
                                <span class="material-icons">settings</span>
                                Instructions
                            </button>
                            <button id="knowledgeBaseButton" class="nav-btn">
                                <span class="material-icons">psychology</span>
                                Knowledge
                            </button>
                            <button id="mcpToolsButton" class="nav-btn">
                                <span class="material-icons">hub</span>
                                MCP Tools
                            </button>
                            <button id="mcpManagementButton" class="nav-btn admin-only" data-admin-display="inline-flex">
                                <span class="material-icons">dns</span>
                                MCP Admin
                            </button>
                            <button id="downloadButton" class="nav-btn">
                                <span class="material-icons">download</span>
                                Download
                            </button>
                            <button id="newMessagesButton" class="nav-btn">
                                <span class="material-icons">refresh</span>
                                Restart
                            </button>
                            <button id="conversationsButton" class="nav-btn">
                                <span class="material-icons">chat</span>
                                Conversations
                            </button>
                            <button id="userManagementButton" class="nav-btn admin-only" data-admin-display="inline-flex">
                                <span class="material-icons">group</span>
                                Users
                            </button>
                            <button id="accountSettingsButton" class="nav-btn">
                                <span class="material-icons">manage_accounts</span>
                                Account
                            </button>
                            <button id="logoutButton" class="nav-btn logout-btn">
                                <span class="material-icons">logout</span>
                                Logout
                            </button>
                        </div>
                        <button class="navbar-toggle" id="navbarToggle" aria-label="Toggle menu" aria-controls="navbarMobileMenu" aria-expanded="false">
                            <span class="hamburger-line"></span>
                            <span class="hamburger-line"></span>
                            <span class="hamburger-line"></span>
                        </button>
                    </div>
                </div>
            </header>

            <div class="navbar-mobile-menu" id="navbarMobileMenu">
                <button id="systemPromptButtonMobile" class="nav-btn-mobile">
                    <span class="material-icons">settings</span>
                    Instructions
                </button>
                <button id="knowledgeBaseButtonMobile" class="nav-btn-mobile">
                    <span class="material-icons">psychology</span>
                    Knowledge
                </button>
                <button id="mcpToolsButtonMobile" class="nav-btn-mobile">
                    <span class="material-icons">hub</span>
                    MCP Tools
                </button>
                <button id="mcpManagementButtonMobile" class="nav-btn-mobile admin-only" data-admin-display="flex">
                    <span class="material-icons">dns</span>
                    MCP Admin
                </button>
                <button id="downloadButtonMobile" class="nav-btn-mobile">
                    <span class="material-icons">download</span>
                    Download
                </button>
                <button id="newMessagesButtonMobile" class="nav-btn-mobile">
                    <span class="material-icons">refresh</span>
                    Restart
                </button>
                <button id="conversationsButtonMobile" class="nav-btn-mobile">
                    <span class="material-icons">chat</span>
                    Conversations
                </button>
                <button id="userManagementButtonMobile" class="nav-btn-mobile admin-only" data-admin-display="flex">
                    <span class="material-icons">group</span>
                    Users
                </button>
                <button id="accountSettingsButtonMobile" class="nav-btn-mobile">
                    <span class="material-icons">manage_accounts</span>
                    Account
                </button>
                <button id="logoutButtonMobile" class="nav-btn-mobile logout-btn">
                    <span class="material-icons">logout</span>
                    Logout
                </button>
            </div>

            <div class="mobile-overlay" id="mobileOverlay"></div>

            <div id="chatDisplay" class="chat-display">
                <div id="chatWelcome" class="chat-welcome">
                    <p class="chat-welcome-title">What should we work on?</p>
                </div>
            </div>
            <div id="promptExamplesSection" class="prompt-examples-section hidden">
                <p class="prompt-examples-title">Here are some examples.</p>
                <div id="promptIdeasContainer"></div>
            </div>
            <footer class="chat-footer">
                <input type="file" id="fileUpload" multiple accept=".csv,.txt,.json,.nc,.xls,.xlsx,.doc,.docx,.ppt,.pptx,.pdf,.md,.mat,.tif,.png,.jpg" style="display: none">
                <div class="prompt-row">
                    <div class="input-container">
                        <div class="input-header">
                            <div id="uploadedFiles" class="attached-files-inline"></div>
                            <div id="uploadProgress" class="progress-bar" style="display: none">
                                <div class="progress"></div>
                            </div>
                        </div>
                        <div class="input-main">
                            <button id="uploadButton">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M21.44 11.05l-9.19 9.19a6.003 6.003 0 01-8.49-8.49l9.19-9.19a4.002 4.002 0 015.66 5.66l-9.2 9.19a2.001 2.001 0 01-2.83-2.83l8.49-8.48" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                            
                            <textarea id="messageInput" placeholder="Type your message, click mic to dictate, or attach/drop a file..." autocomplete="off" rows="1"></textarea>

                            <button id="micButton" class="icon-button">
                                <i class="material-icons">mic</i>
                            </button>
                        </div>

                        <!-- Drop overlay -->
                        <div id="dropOverlay" class="drop-overlay">
                            <p>Drop files or screenshots here</p>
                        </div>
                    </div>
                    <div class="prompt-actions">
                        <button id="sendButton">Send</button>
                        <button id="stopButton" disabled>Stop</button>
                    </div>
                </div>
            </footer>
            <div class="disclaimer-text">
                <span>IDEA can make mistakes â€” check important results. Inputs may be used to improve services by UHSLC and/or LLM providers.</span>
                <a href="https://github.com/uhsealevelcenter/IDEA"> [More info on GitHub]</a>
            </div>
        </div>
    </div>

    <!-- Knowledge Base Management Modal -->
    <div id="knowledgeBaseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Knowledge Base Management</h2>
                <span class="close" id="closeKnowledgeBaseModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="knowledge-base-container">
                    <!-- Upload Section -->
                    <div class="upload-section">
                        <div class="section-header">
                            <h3>Upload New Papers</h3>
                            <div class="upload-info">
                                <span>Supported formats: PDF, TXT, DOC, DOCX, MD</span>
                                <span>Max size: 50MB</span>
                            </div>
                        </div>
                        <div class="upload-area" id="knowledgeBaseUploadArea">
                            <div class="upload-content">
                                <span class="material-icons upload-icon">cloud_upload</span>
                                <p>Drag and drop files here or click to browse</p>
                                <input type="file" id="knowledgeBaseFileInput" multiple accept=".pdf,.txt,.doc,.docx,.md" style="display: none">
                                <button id="browseKnowledgeBaseFiles" class="btn btn-primary">Browse Files</button>
                            </div>
                        </div>
                        <div id="knowledgeBaseUploadProgress" class="progress-bar" style="display: none">
                            <div class="progress"></div>
                        </div>
                    </div>

                    <!-- Papers List Section -->
                    <div class="papers-list-section">
                        <div class="section-header">
                            <h3>Current Papers</h3>
                            <div class="knowledge-base-stats" id="knowledgeBaseStats">
                                <span id="totalFiles">0 files</span>
                                <span id="totalSize">0 MB</span>
                            </div>
                        </div>
                        <div id="papersList" class="papers-list">
                            <div class="loading">Loading papers...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- System Prompt Management Modal -->
    <div id="promptManagementModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>System Prompt Management</h2>
                <span class="close" id="closePromptModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="prompt-management-container">
                    <!-- Prompt List Section -->
                    <div class="prompt-list-section">
                        <div class="section-header">
                            <h3>Available Prompts</h3>
                            <button id="createNewPromptBtn" class="btn btn-primary">
                                <span class="material-icons">add</span>
                                Create New
                            </button>
                        </div>
                        <div id="promptsList" class="prompts-list">
                            <!-- Prompts will be dynamically loaded here -->
                        </div>
                    </div>

                    <!-- Prompt Editor Section -->
                    <div class="prompt-editor-section">
                        <div id="promptEditor" class="prompt-editor" style="display: none;">
                            <h3 id="editorTitle">Edit Prompt</h3>
                            <form id="promptForm">
                                <div class="form-group">
                                    <label for="promptName">Name:</label>
                                    <input type="text" id="promptName" name="name" required>
                                </div>
                                <div class="form-group">
                                    <label for="promptDescription">Description:</label>
                                    <input type="text" id="promptDescription" name="description">
                                </div>
                                <div class="form-group">
                                    <label for="promptContent">Content:</label>
                                    <textarea id="promptContent" name="content" required rows="20"></textarea>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" id="savePromptBtn" class="btn btn-success">Save</button>
                                    <button type="button" id="cancelEditBtn" class="btn btn-secondary">Cancel</button>
                                </div>
                            </form>
                        </div>
                        <div id="promptPreview" class="prompt-preview">
                            <h3>Select a prompt to view or edit</h3>
                            <p>Choose a prompt from the list on the left to view its content or make changes.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Account Settings Modal -->
    <div id="accountSettingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Account Settings</h2>
                <span class="close" id="closeAccountSettingsModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="account-info-section">
                    <h3>Account Information</h3>
                    <div class="form-group">
                        <label for="userEmailDisplay">Email</label>
                        <input type="email" id="userEmailDisplay" readonly disabled>
                    </div>
                </div>
                <hr>
                <form id="accountSettingsForm">
                    <h3>Change Password</h3>
                    <div class="form-group">
                        <label for="currentPasswordInput">Current Password</label>
                        <input type="password" id="currentPasswordInput" autocomplete="current-password" required>
                    </div>
                    <div class="form-group">
                        <label for="newPasswordInput">New Password</label>
                        <input type="password" id="newPasswordInput" autocomplete="new-password" required>
                    </div>
                    <div class="form-group">
                        <label for="confirmPasswordInput">Confirm New Password</label>
                        <input type="password" id="confirmPasswordInput" autocomplete="new-password" required>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">Update Password</button>
                        <button type="button" id="cancelAccountSettingsBtn" class="btn btn-secondary">Cancel</button>
                    </div>
                    <div id="accountSettingsMessage" class="form-message" aria-live="polite"></div>
                </form>
            </div>
        </div>
    </div>

    <!-- User Management Modal -->
    <div id="userManagementModal" class="modal">
        <div class="modal-content wide-modal">
            <div class="modal-header">
                <h2>User Management</h2>
                <span class="close" id="closeUserManagementModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="prompt-management-container user-management-container">
                    <div class="prompt-list-section user-list-section">
                        <div class="section-header">
                            <h3>Users</h3>
                            <button id="createUserButton" class="btn btn-primary">
                                <span class="material-icons">add</span>
                                New User
                            </button>
                        </div>
                        <div id="userList" class="prompts-list user-list">
                            <div class="loading">Loading users...</div>
                        </div>
                    </div>
                    <div class="prompt-editor-section user-form-section">
                        <div class="user-form">
                            <h3 id="userFormTitle">Create User</h3>
                            <form id="userForm">
                                <div class="form-group">
                                    <label for="userFullName">Full Name</label>
                                    <input type="text" id="userFullName" name="full_name" autocomplete="name">
                                </div>
                                <div class="form-group">
                                    <label for="userEmail">Email</label>
                                    <input type="email" id="userEmail" name="email" autocomplete="email" required>
                                </div>
                                <div class="form-group">
                                    <label for="userPassword">Password</label>
                                    <input type="password" id="userPassword" name="password" autocomplete="new-password" required>
                                    <p class="form-helper" id="userPasswordHelper">Password must be 8-40 characters.</p>
                                </div>
                                <div class="form-group checkbox-group">
                                    <label>
                                        <input type="checkbox" id="userIsSuperuser">
                                        <span>Grant superuser access</span>
                                    </label>
                                </div>
                                <div class="form-group checkbox-group">
                                    <label>
                                        <input type="checkbox" id="userIsActive" checked>
                                        <span>User is active</span>
                                    </label>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-success">Save</button>
                                    <button type="button" id="cancelUserEditBtn" class="btn btn-secondary">Cancel</button>
                                </div>
                                <div id="userFormMessage" class="form-message" aria-live="polite"></div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MCP Management Modal -->
    <div id="mcpManagementModal" class="modal">
        <div class="modal-content extra-wide-modal">
            <div class="modal-header">
                <h2>MCP Connection Management</h2>
                <span class="close" id="closeMcpManagementModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="mcp-management-container">
                    <div class="mcp-list-section">
                        <div class="section-header">
                            <h3>Connections</h3>
                            <button id="createMcpConnectionButton" class="btn btn-primary">
                                <span class="material-icons">add</span>
                                New Connection
                            </button>
                        </div>
                        <div id="mcpConnectionList" class="prompts-list mcp-connection-list">
                            <div class="loading">Loading connections...</div>
                        </div>
                    </div>
                    <div class="mcp-form-section">
                        <div class="mcp-form">
                            <h3 id="mcpFormTitle">Create Connection</h3>
                            <form id="mcpConnectionForm">
                                <div class="form-group">
                                    <label for="mcpName">Name</label>
                                    <input type="text" id="mcpName" name="name" required maxlength="120">
                                </div>
                                <div class="form-group">
                                    <label for="mcpDescription">Description</label>
                                    <textarea id="mcpDescription" name="description" rows="2" placeholder="Optional description"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="mcpTransport">Transport</label>
                                    <select id="mcpTransport" name="transport" required>
                                        <option value="streamable_http">Streamable HTTP</option>
                                        <option value="sse">Server Sent Events</option>
                                        <option value="stdio">Stdio / Proxy</option>
                                    </select>
                                </div>
                                <div class="form-group transport-dependent" data-visible-for="streamable_http sse">
                                    <label for="mcpEndpoint">Endpoint URL</label>
                                    <input type="url" id="mcpEndpoint" name="endpoint" placeholder="https://example.com/mcp">
                                </div>
                                <div class="form-group transport-dependent" data-visible-for="stdio">
                                    <label for="mcpCommand">Command</label>
                                    <input type="text" id="mcpCommand" name="command" placeholder="npx mcp-remote">
                                </div>
                                <div class="form-group transport-dependent" data-visible-for="stdio">
                                    <label for="mcpCommandArgs">Command Arguments (JSON array)</label>
                                    <textarea id="mcpCommandArgs" name="command_args" rows="2" placeholder='["mcp-remote", "https://example.com"]'></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="mcpHeaders">Headers (JSON object)</label>
                                    <textarea id="mcpHeaders" name="headers" rows="2" placeholder='{"Authorization": "Bearer ..."}'></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="mcpConfig">Advanced Config (JSON object)</label>
                                    <textarea id="mcpConfig" name="config" rows="3" placeholder='{"timeout": 30, "token_env_var": "MCP_TOKEN"}'></textarea>
                                    <p class="form-helper">Use for custom options like timeouts, working directory, or environment variables.</p>
                                </div>
                                <div class="form-group">
                                    <label for="mcpAuthToken">Auth Token</label>
                                    <input type="password" id="mcpAuthToken" name="auth_token" autocomplete="off" placeholder="Leave blank to keep existing token">
                                </div>
                                <div class="form-group checkbox-group">
                                    <label>
                                        <input type="checkbox" id="mcpClearToken">
                                        <span>Clear stored token</span>
                                    </label>
                                </div>
                                <div class="form-group checkbox-group">
                                    <label>
                                        <input type="checkbox" id="mcpIsActive" checked>
                                        <span>Connection is active</span>
                                    </label>
                                </div>
                                <div class="form-actions stacked-actions">
                                    <div class="primary-actions">
                                        <button type="submit" class="btn btn-success">Save</button>
                                        <button type="button" id="cancelMcpEditBtn" class="btn btn-secondary">Cancel</button>
                                        <button type="button" id="deleteMcpConnectionBtn" class="btn btn-danger" disabled>Delete</button>
                                    </div>
                                    <button type="button" id="testMcpConnectionBtn" class="btn btn-outline">Test Connection</button>
                                </div>
                                <div id="mcpFormMessage" class="form-message" aria-live="polite"></div>
                                <div id="mcpConnectionMeta" class="mcp-connection-meta"></div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MCP Tools Modal -->
    <div id="mcpToolsModal" class="modal">
        <div class="modal-content ultra-wide-modal">
            <div class="modal-header">
                <h2>MCP Tools</h2>
                <span class="close" id="closeMcpToolsModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="mcp-tools-container">
                    <div class="mcp-tools-sidebar">
                        <div class="section-header">
                            <h3>Connections</h3>
                            <button id="refreshMcpConnectionsBtn" class="btn btn-secondary btn-small">
                                <span class="material-icons">refresh</span>
                                Refresh
                            </button>
                        </div>
                        <div id="mcpToolsConnectionList" class="prompts-list">
                            <div class="loading">Loading available connections...</div>
                        </div>
                    </div>
                    <div class="mcp-tools-main">
                        <div class="mcp-tools-header">
                            <div>
                                <h3 id="mcpToolsSelectedName">Select a connection</h3>
                                <p id="mcpToolsSelectedDetails" class="mcp-selected-details"></p>
                            </div>
                            <div class="mcp-tools-tabs" role="tablist">
                                <button class="mcp-tab active" data-tab="tools" role="tab">Tools</button>
                                <button class="mcp-tab" data-tab="resources" role="tab">Resources</button>
                                <button class="mcp-tab" data-tab="prompts" role="tab">Prompts</button>
                            </div>
                        </div>
                        <div class="mcp-tools-content">
                            <div class="mcp-tab-panel active" data-tab="tools">
                                <div id="mcpToolsList" class="mcp-items-list">
                                    <div class="empty-state">Select a connection to load available tools.</div>
                                </div>
                            </div>
                            <div class="mcp-tab-panel" data-tab="resources">
                                <div id="mcpResourcesList" class="mcp-items-list">
                                    <div class="empty-state">Select a connection to load resources.</div>
                                </div>
                            </div>
                            <div class="mcp-tab-panel" data-tab="prompts">
                                <div id="mcpPromptsList" class="mcp-items-list">
                                    <div class="empty-state">Select a connection to load prompts.</div>
                                </div>
                            </div>
                        </div>
                        <div class="mcp-action-panel">
                            <div class="mcp-action-section" data-panel="tools">
                                <h4 id="mcpSelectedToolHeading">Tool Invocation</h4>
                                <p id="mcpSelectedToolDescription" class="mcp-selected-description">Select a tool to view details.</p>
                                <div class="form-group">
                                    <label for="mcpToolArguments">Arguments (JSON)</label>
                                    <textarea id="mcpToolArguments" rows="6" placeholder="{}" disabled></textarea>
                                </div>
                                <div class="form-actions">
                                    <button id="runMcpToolBtn" class="btn btn-success" disabled>Run Tool</button>
                                </div>
                            </div>
                            <div class="mcp-action-section hidden" data-panel="resources">
                                <h4 id="mcpSelectedResourceHeading">Resource Viewer</h4>
                                <p id="mcpSelectedResourceDescription" class="mcp-selected-description">Select a resource to preview its contents.</p>
                                <div class="form-actions">
                                    <button id="readMcpResourceBtn" class="btn btn-success" disabled>Read Resource</button>
                                </div>
                            </div>
                            <div class="mcp-action-section hidden" data-panel="prompts">
                                <h4 id="mcpSelectedPromptHeading">Prompt Viewer</h4>
                                <p id="mcpSelectedPromptDescription" class="mcp-selected-description">Select a prompt to fetch its content.</p>
                                <div class="form-group">
                                    <label for="mcpPromptArguments">Prompt Arguments (JSON)</label>
                                    <textarea id="mcpPromptArguments" rows="4" placeholder="{}" disabled></textarea>
                                </div>
                                <div class="form-actions">
                                    <button id="runMcpPromptBtn" class="btn btn-success" disabled>Load Prompt</button>
                                </div>
                            </div>
                            <div id="mcpResultContainer" class="mcp-result-container">
                                <div class="section-header">
                                    <h4>Result</h4>
                                    <button id="sendMcpResultToChatBtn" class="btn btn-secondary btn-small" disabled>
                                        <span class="material-icons">send</span>
                                        Send to Chat
                                    </button>
                                </div>
                                <div id="mcpResultMessage" class="form-message" aria-live="polite"></div>
                                <pre id="mcpResultOutput" class="mcp-result-output"><code>(No result yet)</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Conversations Management Modal -->
    <div id="conversationsModal" class="modal">
        <div class="modal-content wide-modal">
            <div class="modal-header">
                <h2>Conversation History</h2>
                <span class="close" id="closeConversationsModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="conversations-container">
                    <!-- Search and Filter Section -->
                    <div class="conversations-header">
                        <div class="search-section">
                            <input type="text" id="conversationSearch" placeholder="Search conversations..." class="search-input">
                            <button id="refreshConversations" class="btn btn-secondary">
                                <span class="material-icons">refresh</span>
                                Refresh
                            </button>
                        </div>
                        <div class="filter-section">
                            <button id="showAllConversations" class="btn btn-primary active">All</button>
                            <button id="showFavoriteConversations" class="btn btn-favorite">Favorites</button>
                        </div>
                    </div>
                    
                    <!-- Conversations List -->
                    <div class="conversations-list" id="conversationsList">
                        <div class="loading">Loading conversations...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- DOMPurify for sanitizing HTML -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.1.6/purify.min.js" integrity="sha512-jB0TkTBeQC9ZSkBqDhdmfTv1qdfbWpGE72yJ/01Srq6hEzZIz2xkz1e57p9ai7IeHMwEG7HpzG6NdptChif5Pg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="prism.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
            skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
        },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    <script src="config.js"></script>
    <script src="conversation_manager.js"></script>
    <script src="assistant.js"></script>
    <script src="account-settings.js"></script>
    <script src="prompt-manager.js"></script>
    <script src="knowledge-base.js"></script>
    <script src="mcp-manager.js"></script>
    <script src="mcp-tools.js"></script>
    <script src="user-management.js"></script>
    <script src="conversation_ui.js"></script>
</body>
</html>
